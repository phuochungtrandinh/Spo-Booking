{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Quản lý đặt sân</title>
  <link href="{% static 'bookings/style.css' %}" rel="stylesheet">
  <style>
    :root{
      --green:#0f9d58; --green-2:#0b7e46; --green-weak:#103a29; --panel:#0e1512; --panel-2:#0c1210; --stroke:rgba(255,255,255,.08); --muted:#bde7d1; --text:#eafff4; --bg:#0b1210;
      --badge-wait:#f7e8b0; --badge-wait-text:#6a4c00; --badge-ok:#bff5d9; --badge-ok-text:#074823; --badge-cancel:#d8dee3; --badge-cancel-text:#2a2f33;
    }
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(1100px 600px at 50% -20%, #1a6a4c33, transparent 60%), var(--bg);color:var(--text);font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial}
    .layout{display:grid;grid-template-columns:260px 1fr;min-height:100vh}
    .side{background:linear-gradient(180deg, var(--green), var(--green-2));padding:20px;color:#052015}
    .brand{display:flex;gap:10px;align-items:center;font-weight:900;font-size:20px;color:#052015;margin-bottom:18px}
    .nav a{display:flex;gap:10px;align-items:center;padding:10px 12px;margin:6px 0;border-radius:10px;color:#052015;text-decoration:none;background:rgba(255,255,255,.12)}
    .nav a.active{background:#ffffff;}
    .content{padding:22px}
    .toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:end;margin-bottom:14px}
    .field{display:flex;flex-direction:column;gap:6px}
    .input, .select{background:#0e1613;color:var(--text);border:1px solid var(--stroke);border-radius:10px;padding:10px 12px;min-width:180px}
    .card{background:linear-gradient(180deg, var(--panel), var(--panel-2));border:1px solid var(--stroke);border-radius:14px;box-shadow:0 10px 30px #00000055, inset 0 1px 0 rgba(255,255,255,.04)}
    table{width:100%;border-collapse:separate;border-spacing:0}
    thead th{font-size:12px;text-transform:uppercase;letter-spacing:.4px;color:var(--muted);text-align:left;padding:14px;border-bottom:1px solid var(--stroke)}
    tbody td{padding:14px;border-bottom:1px solid var(--stroke)}
    .chip{display:inline-flex;align-items:center;padding:6px 10px;border-radius:999px;font-weight:700;font-size:12px}
    .chip.wait{background:var(--badge-wait);color:var(--badge-wait-text)}
    .chip.ok{background:var(--badge-ok);color:var(--badge-ok-text)}
    .chip.cancel{background:var(--badge-cancel);color:var(--badge-cancel-text)}
    .btn{background:var(--green);border:1px solid #1eea7d44;color:#062015;padding:8px 12px;border-radius:10px;font-weight:700;cursor:pointer}
    .btn.ghost{background:transparent;color:#d8fff1;border-color:#2a644b}
    .amount{background:#0f1a15;border:1px solid #2a644b;color:#b7ffd9;padding:6px 10px;border-radius:999px;font-weight:800}
    @media(max-width:980px){.layout{grid-template-columns:1fr}.side{position:sticky;top:0;z-index:1;border-bottom:1px solid #ffffff22}}
  </style>
</head>
<body>
  <div class="layout">
    <aside class="side">
      <div class="brand">SPO BOOKING</div>
      <nav class="nav">
        <a class="active" href="#">Quản lý đặt lịch</a>
        <a href="#">Quản lý khách hàng</a>
        <a href="#">Quản lý sân</a>
        <a href="#">Đăng xuất</a>
      </nav>
    </aside>
    <main class="content">
      <div class="toolbar">
        <div class="field">
          <label for="date">Ngày</label>
          <input class="input" id="date" type="date">
        </div>
        <div class="field">
  <label for="branch">Sân</label>
  <select class="select" id="branch" name="branch">
    <option value="">-- Chọn sân --</option>
    <option value="1">Sân 1</option>
    <option value="2">Sân 2</option>
    <option value="3">Sân 3</option>
  </select>
</div>
        <div class="field">
          <label for="status">Trạng thái</label>
          <select class="select" id="status">
            <option value="">Tất cả</option>
            <option value="PENDING">Chờ xác nhận</option>
            <option value="CONFIRMED">Đã xác nhận</option>
            <option value="CANCELLED">Đã hủy</option>
          </select>
        </div>
      </div>

      <section class="card">
        <table>
          <thead>
            <tr>
              <th>Ngày/Giờ</th>
              <th>Khách hàng</th>
              <th>Sân</th>
              <th>Thanh toán</th>
              <th>Trạng thái</th>
              <th>Thao tác</th>
            </tr>
          </thead>
          <tbody>
            {% for booking in bookings %}
              <tr>
                <td>{{ booking.start_time|date:"H:i" }} - {{ booking.end_time|date:"H:i" }}</td>
                <td>
                  {{ booking.user.full_name|default:"Khách hàng" }}<br>
                  <span style="opacity:.7;font-size:12px;">{{ booking.user.phone|default:"" }}</span>
                </td>
                <td>{{ booking.court.name }}</td>
                <td><span class="amount">{{ booking.total_amount|floatformat:0 }} VND</span></td>
                <td>
                  {% if booking.status == 'PENDING' %}
                    <span class="chip wait">Chờ xác nhận</span>
                  {% elif booking.status == 'CONFIRMED' %}
                    <span class="chip ok">Đã xác nhận</span>
                  {% elif booking.status == 'CANCELLED' %}
                    <span class="chip cancel">Đã hủy</span>
                  {% else %}
                    <span class="chip">{{ booking.status }}</span>
                  {% endif %}
                </td>
                <td>
                  {% if booking.status == 'PENDING' %}
                    <button class="btn">Xác nhận</button>
                  {% elif booking.status == 'CONFIRMED' %}
                    <button class="btn ghost">Hủy lịch</button>
                  {% else %}
                    <button class="btn ghost" disabled>Không khả dụng</button>
                  {% endif %}
                </td>
              </tr>
            {% empty %}
              <tr><td colspan="6" style="padding:22px;opacity:.7">Không có dữ liệu đặt sân.</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </section>
    </main>
  </div>
</body>
</html>
