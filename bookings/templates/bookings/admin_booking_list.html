{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container py-4">
  <h2 class="mb-4 fw-bold">Quản lý đặt lịch</h2>

  <!-- Bộ lọc -->
  <div class="filters d-flex flex-wrap gap-3 mb-4">
    <div>
      <input type="date" id="date" class="form-control filter-input" value="2025-10-20">
    </div>

    <div>
      <select id="branch" class="form-select filter-input">
        <option>Cơ sở 1</option>
        <option>Cơ sở 2</option>
        <option>Cơ sở 3</option>
      </select>
    </div>

    <div>
      <select id="status" class="form-select filter-input">
        <option>Tất cả trạng thái</option>
        <option>Chờ xác nhận</option>
        <option>Đã xác nhận</option>
        <option>Đã hủy</option>
      </select>
    </div>
  </div>

  <!-- Bảng đặt sân -->
  <div class="card shadow-sm border-0 rounded-4">
    <div class="card-body">
      <table class="table table-borderless align-middle text-center">
        <thead class="table-light border-bottom">
          <tr>
            <th>Ngày/Giờ</th>
            <th>Khách hàng</th>
            <th>Sân</th>
            <th>Thanh toán</th>
            <th>Trạng thái</th>
            <th>Thao tác</th>
          </tr>
        </thead>
        <tbody>
          {% for booking in bookings %}
          <tr>
            <td>{{ booking.start_time|date:"H:i" }} - {{ booking.end_time|date:"H:i" }}</td>
            <td>
              {{ booking.user.username }}<br>
              <small class="text-muted">{{ booking.user.phone_number }}</small>
            </td>
            <td>{{ booking.court.name }}</td>
            <td><span class="badge bg-warning text-dark">{{ booking.total_amount|floatformat:0 }}₫</span></td>
            <td>
              {% if booking.status == 'pending' %}
                <span class="badge bg-warning text-dark">Chờ xác nhận</span>
              {% elif booking.status == 'confirmed' %}
                <span class="badge bg-success">Đã xác nhận</span>
              {% elif booking.status == 'cancelled' %}
                <span class="badge bg-secondary">Đã hủy</span>
              {% endif %}
            </td>
            <td>
              {% if booking.status == 'pending' %}
                <button class="btn btn-success btn-sm">Xác nhận</button>
              {% elif booking.status == 'confirmed' %}
                <button class="btn btn-outline-danger btn-sm">Hủy lịch</button>
              {% else %}
                <button class="btn btn-secondary btn-sm" disabled>Không khả dụng</button>
              {% endif %}
            </td>
          </tr>
          {% empty %}
          <tr><td colspan="6" class="text-muted py-3">Không có dữ liệu đặt sân.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<style>
  .filters {
    margin-bottom: 1.5rem;
  }

  .filter-input {
    width: 180px;
    padding: 8px 12px;
    border-radius: 8px;
    border: 1px solid #dee2e6;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    background-color: #fff;
    transition: all 0.2s ease-in-out;
  }

  .filter-input:hover, .filter-input:focus {
    border-color: #86b7fe;
    box-shadow: 0 0 4px rgba(13,110,253,0.25);
  }

  table th {
    color: #333;
    font-weight: 600;
    padding: 10px;
  }

  table td {
    padding: 12px;
  }
</style>

{% endblock %}